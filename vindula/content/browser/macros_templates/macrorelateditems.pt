<metal:view_macro define-macro="view_portlet"
                  tal:define="view_macro python:context.restrictedTraverse('macro-relateditens-content');
                              items python:context.computeRelatedItems();">
    <div class="row" id="tile-see-also"
         tal:condition="items">

        <div class="columns small-12">
            <h5 class="subheader">
                <strong>Conte√∫dos Relacionados</strong>
            </h5>
        </div>

        <metal:view_macro define-macro="portlet"
                          tal:define="tools context/@@plone_tools;
                                      getInfoFor python:tools.workflow().getInfoFor;">
    <tal:relatedItems tal:define="related python:context.computeRelatedItems();">
        <tal:block tal:condition="python:related">
            <tal:def define="list_itens related;
                             title_box string:Relacionados;
                             accordion python:True;
                             absolute_url string:${context/absolute_url}/macro-relateditens-content">
                <metal:block metal:use-macro="context/macro_recent_content/macros/view" />
            </tal:def>
        </tal:block>
    </tal:relatedItems>
        </metal:view_macro>
    </div>
</metal:view_macro>

<div metal:define-macro="view"
    class="relatedItems"
    tal:define="tools context/@@plone_tools;
                getInfoFor python:tools.workflow().getInfoFor;">
    <tal:relatedItems tal:define="related python:context.computeRelatedItems();">
        <tal:block tal:condition="python:related">
            <tal:def define="list_itens related;
                             title_box string:Relacionados;
                             accordion python:True;
                             absolute_url string:${context/absolute_url}/macro-relateditens-content">
                <metal:block metal:use-macro="context/macro_recent_content/macros/view" />
            </tal:def>
        </tal:block>
    </tal:relatedItems>
</div>

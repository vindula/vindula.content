<metal:view_macro define-macro="view">

    <tal:block define="view_macro python:context.restrictedTraverse('macro_list_file');
                     Batch python:modules['Products.CMFPlone'].Batch;
                     b_size request/b_size|string:3;
                     b_start python:0;
                     b_start request/b_start | b_start;
                     theme theme|request/theme|nothing;
                     structures structures|request/structures|nothing;
                     sort_on request/sort_on|string:access;
                     list_files python: view_macro.list_files(theme,structures,sort_on) or [];
                     batch python:Batch(list_files, int(b_size), int(b_start), pagerange=len(list_files));"
               condition="batch">

        <div tal:attributes="class string:row list_file ${theme|structures/Title|nothing}" id="list_file">
	        <div id="pag-nav" class="columns large-12">
	            <metal:block metal:use-macro="context/boll_batch/macros/navigation" />
	        </div>
	        <div class="titulo_area columns large-12">
	            <h5 class="left" tal:condition="theme">
	                <a href="#" tal:content="theme"></a>
                </h5>
	            <h5 class="left" tal:condition="structures">
	                <a href="#" tal:content="structures/Title| python: view_macro.getStructures_byUID(structures)"></a>
                </h5>
                <form class="custom">
                    <select name="order_by"  id="customDropdown" class="right order_by medium">
                        <option value="access" tal:attributes="selected python: sort_on=='access' and 'selected' or ''">Mais Acessados</option>
                        <option value="effective" tal:attributes="selected python: sort_on=='effective' and 'selected' or ''">Itens Recentes</option>
                    </select>
                </form>
                
                <hr/>
	        </div>
            
	        <input type="hidden" id="b_size" tal:attributes="value b_size" />
	        <input type="hidden" id="b_start" tal:attributes="value b_start" />
	        <input type="hidden" id="theme" tal:attributes="value theme" />
            <input type="hidden" id="structures" tal:attributes="value structures/UID|structures" />
	        <input type="hidden" id="absolute_url" tal:attributes="value string:${context/portal_url}/macro_list_file" >
            
            <div class="columns large-12">
                <div class="row">
                    <tal:rep repeat="item batch">
                        <div class="columns large-6">
                            <div class="container-of-type" tal:define="item_object item/getObject|python:item">
                                <img src="++theme++vindula.themedefault/images/demos/demo2-Banner_Destaque.jpg"/>
                                <div class="caption-of-type">
                                    <a tal:attributes="href item_object/absolute_url"
                                       tal:content="item_object/Title" ></a>
                                    <p>ASCOM</p>
                                    <span tal:content="python:'data: '+ item_object.bobobase_modification_time().strftime('%d/%m/%Y')">Date</span>
                                </div>
                                <tal:cond condition="item_object/getStructures">
                                      unidade: <span tal:content="python: item_object.getStructures().Title()"></span><br />
                                </tal:cond>
                            </div>
                        </div>
                        
                        <div class="columns large-3">
                            <div class="row">
                                <div class="columns large-12">
                                    <div class="container-of-type" tal:define="item_object item/getObject|python:item">
                                        <img src="++theme++vindula.themedefault/images/demos/demo-Banner_Destaque.jpg"/>
                                        <div class="caption-of-type">
                                            <a tal:attributes="href item_object/absolute_url"
                                               tal:content="item_object/Title" ></a>
                                            <p>ASCOM</p>
                                            <span tal:content="python:'data: '+ item_object.bobobase_modification_time().strftime('%d/%m/%Y')">Date</span>
                                        </div>
                                        <tal:cond condition="item_object/getStructures">
                                              unidade: <span tal:content="python: item_object.getStructures().Title()"></span><br />
                                        </tal:cond>
                                    </div>
                                </div>
                                
                                <div class="columns large-12">
                                    <div class="container-of-type" tal:define="item_object item/getObject|python:item">
                                        <img src="++theme++vindula.themedefault/images/demos/demo3-Banner_Destaque.jpg"/>
                                        <div class="caption-of-type">
                                            <a tal:attributes="href item_object/absolute_url"
                                               tal:content="item_object/Title" ></a>
                                            <p>ASCOM</p>
                                            <span tal:content="python:'data: '+ item_object.bobobase_modification_time().strftime('%d/%m/%Y')">Date</span>
                                        </div>
                                        <tal:cond condition="item_object/getStructures">
                                              unidade: <span tal:content="python: item_object.getStructures().Title()"></span><br />
                                        </tal:cond>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="columns large-3">
                            <div class="row">
                                <div class="columns large-12">
                                    <div class="container-of-type" tal:define="item_object item/getObject|python:item">
                                        <img src="++theme++vindula.themedefault/images/demos/demo4-Banner_Destaque.jpg"/>
                                        <div class="caption-of-type">
                                            <a tal:attributes="href item_object/absolute_url"
                                               tal:content="item_object/Title" ></a>
                                            <p>ASCOM</p>
                                            <span tal:content="python:'data: '+ item_object.bobobase_modification_time().strftime('%d/%m/%Y')">Date</span>
                                        </div>
                                        <tal:cond condition="item_object/getStructures">
                                              unidade: <span tal:content="python: item_object.getStructures().Title()"></span><br />
                                        </tal:cond>
                                    </div>
                                </div>
                                
                                <div class="columns large-12">
                                    <div class="container-of-type" tal:define="item_object item/getObject|python:item">
                                        <img src="++theme++vindula.themedefault/images/demos/demo3-Banner_Destaque.jpg"/>
                                        <div class="caption-of-type">
                                            <a tal:attributes="href item_object/absolute_url"
                                               tal:content="item_object/Title" ></a>
                                            <p>ASCOM</p>
                                            <span tal:content="python:'data: '+ item_object.bobobase_modification_time().strftime('%d/%m/%Y')">Date</span>
                                        </div>
                                        <tal:cond condition="item_object/getStructures">
                                              unidade: <span tal:content="python: item_object.getStructures().Title()"></span><br />
                                        </tal:cond>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </tal:rep>
                </div>
            </div>
            <!-- Spinner -->
            <div id="spinner" class="display-none" style="text-align:center; margin: 30px;">
                <img src="" alt="spinner" align="center" tal:attributes="src string:${context/portal_url}/++resource++vindula.myvindula.views/ajaxLoader.gif" />
            </div>
		</div>
    </tal:block>
</metal:view_macro>
<metal:view_macro define-macro="view">

    <script type="text/javascript" src=""
                tal:attributes="src string:${context/absolute_url|nothing}/++resource++vindula.content/js/ajax_filter_file.js"></script>

    <tal:def define="view_macro python:context.restrictedTraverse('macro_filter_file');

                     is_theme is_theme|nothing;
                     is_structures is_structures|nothing;

                     themes request/themes[]|python:[];
                     structures request/structures[]|python:[];

                     list_filter python: view_macro.list_filter(is_theme,is_structures) or [];">


        <div class="filterFile" id="filter_file">
            <span class="sizeFilter" tal:content="python: 'Total: ('+ str(len(list_filter)) +')'"> </span>

            <tal:rep repeat="item list_filter">

                <tal:def define="item_obj item/getObject|item;
                                 item_id  item_obj/UID|item_obj"  >

                    <input tal:attributes="value item_id;
                                           checked python:item_id in themes and 'checked' or '';"
                           tal:condition="is_theme"
                           type="checkbox" class="filter" name="theme" />

                    <input tal:attributes="value item_id;
                                           checked python:item_id in structures and 'checked' or '';"
                           tal:condition="is_structures"
                           type="checkbox" class="filter" name="structures" />

                    <tal:cont content="item_obj/title">title</tal:cont><br />

                </tal:def>

            </tal:rep>

            <div class="actionsFilter">
                <input type='button' value='Limpar Filtro' class="clearFilter" />
                <input type='button' value='Aplicar' class="execFilter" />

            </div>

            <!-- Spinner -->
            <div id="spinner" class="display-none" style="text-align:center; margin: 30px;">
                <img src="" alt="spinner" align="center" tal:attributes="src string:${context/portal_url}/++resource++vindula.myvindula.views/ajaxLoader.gif" />
            </div>

        </div>
    </tal:def>
</metal:view_macro>

<metal:view_macro define-macro="tabular">

    <script type="text/javascript" src=""
                tal:attributes="src string:${context/absolute_url|nothing}/++resource++vindula.content/js/ajax_filter_file.js"></script>


     <tal:def define="view_macro python:context.restrictedTraverse('macro_filter_file');
                      subject request/subject|python:'';">

        <div class="filterFile" id="filter_file">

            <input type="text" class="filter" name="subject" tal:attributes="value subject" />


            <div class="actionsFilter">
                <input type='button' value='Limpar Filtro' class="clearFilter" />
                <input type='button' value='Aplicar' class="execFilter" />
            </div>

            <!-- Spinner -->
            <div id="spinner" class="display-none" style="text-align:center; margin: 30px;">
                <img src="" alt="spinner" align="center" tal:attributes="src string:${context/portal_url}/++resource++vindula.myvindula.views/ajaxLoader.gif" />
            </div>


        </div>

    </tal:def>


</metal:view_macro>




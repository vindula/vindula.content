<metal:view_macro define-macro="view">

    <div class="visualClear"></div>

    <div class="filterFile" id="list_file">

        <tal:def tal:define="view_macro python:context.restrictedTraverse('macro_tabular_file');
                             Batch python:modules['Products.CMFPlone'].Batch;
                             b_size request/b_size|string:10;
                             b_start python:0;
                             b_start request/b_start | b_start;
                             portal_type portal_type|request/portal_type|nothing;
                             subject request/subject|python:'';
                             list_files python: view_macro.list_files(subject, portal_type) or [];
                             batch python:Batch(list_files, int(b_size), int(b_start), pagerange=len(list_files));">


            <input type="hidden" id="b_size" tal:attributes="value b_size" />
            <input type="hidden" id="b_start" tal:attributes="value b_start" />
            <meta:macro metal:define-macro="navegacao-macro">
                <div id="paginacao">
                    <div id="size-nav" class="float-left">
                        <p>
                            <span tal:content="python:'Total: ('+str(len(list_files))+')'">Total (XX)</span>
                            |
                            <span tal:define="css python:'font-weight:bolder;;'">Itens por pagina:
                                <a class="c-pointer" id="itenspage"
                                   tal:attributes="style python:b_size == '10' and css or '' ">10</a>,
                                <a class="c-pointer" id="itenspage"
                                   tal:attributes="style python:b_size == '20' and css or '' ">20</a>,
                                <a class="c-pointer" id="itenspage"
                                   tal:attributes="style python:b_size == '30' and css or '' ">30</a>,
                                <a class="c-pointer" id="itenspage"
                                   tal:attributes="style python:b_size == '40' and css or '' ">40</a>
                            </span>
                        </p>

                    </div>
                    <div id="pag-nav" class="float-right">
                        <metal:block metal:use-macro="context/boll_batch/macros/navigation" />
                    </div>
                </div>
                <div class="visualClear"></div>
            </meta:macro>

            <div class="visualClear"></div>
            <metal:macro define-macro="news-list">
                <table tal:define=" show_fields show_fields|python:['title', 'description']
                                    fields python:view_macro.filter_fields(context.Schema(), show_fields);">
                    <thead>
                        <tr>
                            <tal:rep repeat="field fields">
                                 <th tal:content="field/getName"></th>
                            </tal:rep>
                        </tr>
                    </thead>
                    <tbody>
                        <tr tal:repeat="item batch">
                            <td tal:repeat="field fields"
                                tal:define="item_object item/getObject;
                                            context python: item_object;
                                            field_macro field_macro | context/widgets/field/macros/view;">
                                 <tal:base_view_macro tal:define="widget_view python:context.widget(field.getName(), mode='view', use_label=0);
                                                                  field_macros context/widgets/field/macros;
                                                                  label_macro view_macros/label |  label_macro |  field_macros/label;
                                                                  data_macro view_macros/data |  data_macro |  field_macros/data;">
                                     <tal:if_perm condition="python:'view' in widget.modes and 'r' in field.mode and field.checkPermission('r',here)">
                                         <metal:use_data use-macro="data_macro|default" />
                                     </tal:if_perm>
                                 </tal:base_view_macro> 
                            </td>
                        </tr>
                    </tbody>
                 </table>
                 <!--div tal:define="is_end repeat/item/end;"
                         tal:attributes="class python: is_end and 'info' or 'info borderDif'">
    
                        <tal:cond condition="item_object/getStructures|nothing">
                              unidade: <span tal:content="python: item_object.getStructures().Title()"></span><br />
                        </tal:cond>
    
                        <p tal:content="item_object/Title"> </p>
                        <p tal:content="item_object/Description"> </p>
    
                        <span tal:content="python:'data: '+ item_object.bobobase_modification_time().strftime('%d/%m/%Y')">Date</span>
                        <p tal:content="item_object/Description"> </p>
    
    
                    </div-->
             </metal:macro>

             <metal:block metal:use-macro="context/macro_tabular_file/macros/navegacao-macro" />

        </tal:def>



    </div>

    <div class="visualClear"></div>

</metal:view_macro>